[
	{
		"id": "redeploy",
		"execute-command": "/scripts/redeploy.sh",
		"command-working-directory": "/app",
		"trigger-rule": {
			"and": [
				{
					"match": {
						"type": "payload-hmac-sha256",
						"secret": "env:WEBHOOK_SECRET",
						"parameter": {
							"source": "header",
							"name": "X-Hub-Signature-256"
						}
					}
				},
				{
					"match": {
						"type": "value",
						"value": "refs/heads/main",
						"parameter": {
							"source": "payload",
							"name": "ref"
						}
					}
				}
			]
		}
	}
]